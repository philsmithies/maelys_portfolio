"use strict";var V=Object.defineProperty,G=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var A=(e,t,n)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||(t={}))N.call(t,n)&&A(e,n,t[n]);if(L)for(var n of L(t))C.call(t,n)&&A(e,n,t[n]);return e},b=(e,t)=>G(e,J(t));var v=(e,t)=>{var n={};for(var l in e)N.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(e!=null&&L)for(var l of L(e))t.indexOf(l)<0&&C.call(e,l)&&(n[l]=e[l]);return n};Object.defineProperty(exports,"__esModule",{value:!0});exports[Symbol.toStringTag]="Module";var w=require("react");function Q(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var c=Q(w);exports.ListNestMode=void 0;(function(e){e.Html="html",e.Direct="direct"})(exports.ListNestMode||(exports.ListNestMode={}));function E(e){return e._type==="span"&&"text"in e&&typeof e.text=="string"&&(Array.isArray(e.marks)||typeof e.marks=="undefined")}function D(e){return typeof e._type=="string"&&e._type[0]!=="@"&&(!("markDefs"in e)||Array.isArray(e.markDefs)&&e.markDefs.every(t=>typeof t._key=="string"))&&"children"in e&&Array.isArray(e.children)&&e.children.every(t=>typeof t=="object"&&"_type"in t)}function U(e){return D(e)&&"listItem"in e&&typeof e.listItem=="string"}function O(e){return e._type==="@list"}function W(e){return e._type==="@span"}function K(e){return e._type==="@text"}function H(e){let t="";return e.children.forEach(n=>{K(n)?t+=n.text:W(n)&&(t+=H(n))}),t}function X(e){const t=Array.isArray(e)?e:[e];let n="";return t.forEach((l,s)=>{!D(l)||(l.children.forEach(r=>{n+=E(r)?r.text:" "}),s!==t.length-1&&(n+=`

`))}),n}function Y(e,t){const n=[];let l;for(let s=0;s<e.length;s++){const r=e[s];if(!U(r)){n.push(r),l=void 0;continue}if(!l){l=S(r,s,t),n.push(l);continue}if(Z(r,l)){l.children.push(r);continue}if((r.level||1)>l.level){const a=S(r,s,t);if(t==="html"){const y=l.children[l.children.length-1],k=b(I({},y),{children:[...y.children,a]});l.children[l.children.length-1]=k}else l.children.push(a);l=a;continue}if((r.level||1)<l.level){const a=M(n[n.length-1],r);if(a){l=a,l.children.push(r);continue}l=S(r,s,t),n.push(l);continue}if(r.listItem!==l.listItem){const a=M(n[n.length-1],{level:r.level||1});if(a&&a.listItem===r.listItem){l=a,l.children.push(r);continue}else{l=S(r,s,t),n.push(l);continue}}console.warn("Unknown state encountered for block",r),n.push(r)}return n}function Z(e,t){return(e.level||1)===(t.level||1)&&(e.listItem||"bullet")===(t.listItem||"bullet")}function S(e,t,n){return{_type:"@list",_key:`${e._key||`${t}`}-parent`,mode:n,level:e.level||1,listItem:e.listItem||"bullet",children:[e]}}function M(e,t){const n=t.level||1,l=t.listItem||"normal",s=typeof t.listItem=="string";if(O(e)&&(e.level||1)===n&&s&&(e.listItem||"normal")===l)return e;if(!("children"in e))return;const r=e.children[e.children.length-1];return r&&!E(r)?M(r,t):void 0}const j=["strong","em","code","underline","strike-through"];function ee(e){const{children:t,markDefs:n=[]}=e;if(!t||!t.length)return[];const l=t.map(te),s={_type:"@span",children:[],markType:"<unknown>"};let r=[s];for(let a=0;a<t.length;a++){const y=t[a],k=l[a];if(!k){r[r.length-1].children.push(b(I({},y),{_type:"@span",children:[],markType:"<unknown>"}));continue}let i=1;if(r.length>1)for(i;i<r.length;i++){const u=r[i].markKey,d=u?k.indexOf(u):-1;if(d===-1)break;k.splice(d,1)}r=r.slice(0,i);let o=le(r)||s;for(const u of k){const d=n.find(m=>m._key===u),f=d?d._type:u,h={_type:"@span",_key:y._key,children:[],markDef:d,markType:f,markKey:u};o.children.push(h),r.push(h),o=h}if(E(y)){const u=y.text.split(`
`);for(let d=u.length;d-- >1;)u.splice(d,0,`
`);o.children=o.children.concat(u.map(re))}else o.children=o.children.concat(y)}return s.children}function te(e,t,n){if(!E(e)||!e.marks)return[];if(!e.marks.length)return[];const l=e.marks.slice(),s={};return l.forEach(r=>{s[r]=s[r]?s[r]+1:1;for(let a=t+1;a<n.length;a++){const y=n[a];if(E(y)&&Array.isArray(y.marks)&&y.marks.indexOf(r)!==-1)s[r]++;else break}}),l.sort((r,a)=>ne(s,r,a))}function ne(e,t,n){const l=e[t]||0,s=e[n]||0;if(l!==s)return s-l;const r=j.indexOf(t),a=j.indexOf(n);return r!==a?r-a:t<n?-1:t>n?1:0}function le(e){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n._type==="@span"&&n.children)return n}}function re(e){return{_type:"@text",text:e}}function P(e,t){const k=t,{block:n,list:l,listItem:s,marks:r,types:a}=k,y=v(k,["block","list","listItem","marks","types"]);return I(b(I({},e),{block:x(e,t,"block"),list:x(e,t,"list"),listItem:x(e,t,"listItem"),marks:x(e,t,"marks"),types:x(e,t,"types")}),y)}function x(e,t,n){const l=t[n],s=e[n];return typeof l=="function"||l&&typeof s=="function"?l:l?I(I({},s),l):s}const se=({children:e,value:t})=>c.default.createElement("a",{href:t==null?void 0:t.href},e),ie={textDecoration:"underline"},oe={em:({children:e})=>c.default.createElement("em",null,e),strong:({children:e})=>c.default.createElement("strong",null,e),code:({children:e})=>c.default.createElement("code",null,e),underline:({children:e})=>c.default.createElement("span",{style:ie},e),"strike-through":({children:e})=>c.default.createElement("del",null,e),link:se},ce={number:({children:e})=>c.default.createElement("ol",null,e),bullet:({children:e})=>c.default.createElement("ul",null,e)},ue=({children:e})=>c.default.createElement("li",null,e),T=(e,t)=>`Unknown ${e}, specify a component for it in the \`components.${t}\` prop`,q=e=>T(`block type "${e}"`,"types"),ae=e=>T(`mark type "${e}"`,"marks"),fe=e=>T(`block style "${e}"`,"block"),de=e=>T(`list style "${e}"`,"list"),ye=e=>T(`list item style "${e}"`,"listItem");function ke(e){console.warn(e)}const R={display:"none"},me=({value:e,isInline:t})=>{const n=q(e._type);return t?c.default.createElement("span",{style:R},n):c.default.createElement("div",{style:R},n)},he=({markType:e,children:t})=>c.default.createElement("span",{className:`unknown__pt__mark__${e}`},t),pe=({children:e})=>c.default.createElement("p",null,e),Ie=({children:e})=>c.default.createElement("ul",null,e),_e=({children:e})=>c.default.createElement("li",null,e),ge=()=>c.default.createElement("br",null),be={normal:({children:e})=>c.default.createElement("p",null,e),blockquote:({children:e})=>c.default.createElement("blockquote",null,e),h1:({children:e})=>c.default.createElement("h1",null,e),h2:({children:e})=>c.default.createElement("h2",null,e),h3:({children:e})=>c.default.createElement("h3",null,e),h4:({children:e})=>c.default.createElement("h4",null,e),h5:({children:e})=>c.default.createElement("h5",null,e),h6:({children:e})=>c.default.createElement("h6",null,e)},B={types:{},block:be,marks:oe,list:ce,listItem:ue,hardBreak:ge,unknownType:me,unknownMark:he,unknownList:Ie,unknownListItem:_e,unknownBlockStyle:pe},$=w.createContext(B),we=({components:e,children:t})=>{const n=w.useMemo(()=>P(B,e),[e]);return c.default.createElement($.Provider,{value:n},t)};function Ee({value:e,components:t,listNestingMode:n,onMissingComponent:l=ke}){const s=l||Te,r=Array.isArray(e)?e:[e],a=Y(r,n||exports.ListNestMode.Html),y=w.useContext($),k=w.useMemo(()=>t?P(y,t):y,[y,t]),i=w.useMemo(()=>xe(k,s),[k,s]),o=a.map((u,d)=>i({node:u,index:d,isInline:!1,renderNode:i}));return t?c.default.createElement($.Provider,{value:k},o):c.default.createElement(c.default.Fragment,null,o)}const xe=(e,t)=>{function n(i){const{node:o,index:u,isInline:d}=i,f=o._key||`node-${u}`;return O(o)?s(o,u,f):U(o)?l(o,u,f):W(o)?r(o,u,f):D(o)?a(o,u,f,d):K(o)?y(o,f):k(o,u,f,d)}function l(i,o,u){const d=F({node:i,index:o,isInline:!1,renderNode:n}),f=e.listItem,m=(typeof f=="function"?f:f[i.listItem])||e.unknownListItem;if(m===e.unknownListItem){const g=i.listItem||"bullet";t(ye(g),{type:g,nodeType:"listItemStyle"})}let p=d.children;if(i.style&&i.style!=="normal"){const _=i,{listItem:g}=_,z=v(_,["listItem"]);p=n({node:z,index:o,isInline:!1,renderNode:n})}return c.default.createElement(m,{key:u,value:i,index:o,isInline:!1,renderNode:n},p)}function s(i,o,u){const d=i.children.map((p,_)=>n({node:p._key?p:b(I({},p),{_key:`li-${o}-${_}`}),index:o,isInline:!1,renderNode:n})),f=e.list,m=(typeof f=="function"?f:f[i.listItem])||e.unknownList;if(m===e.unknownList){const p=i.listItem||"bullet";t(de(p),{nodeType:"listStyle",type:p})}return c.default.createElement(m,{key:u,value:i,index:o,isInline:!1,renderNode:n},d)}function r(i,o,u){const{markDef:d,markType:f,markKey:h}=i,m=e.marks[f]||e.unknownMark,p=i.children.map((_,g)=>n({node:_,index:g,isInline:!0,renderNode:n}));return m===e.unknownMark&&t(ae(f),{nodeType:"mark",type:f}),c.default.createElement(m,{key:u,text:H(i),value:d,markType:f,markKey:h,renderNode:n},p)}function a(i,o,u,d){const g=F({node:i,index:o,isInline:d,renderNode:n}),{_key:f}=g,h=v(g,["_key"]),m=h.node.style||"normal",_=(typeof e.block=="function"?e.block:e.block[m])||e.unknownBlockStyle;return _===e.unknownBlockStyle&&t(fe(m),{nodeType:"blockStyle",type:m}),c.default.createElement(_,b(I({key:u},h),{value:h.node,renderNode:n}))}function y(i,o){if(i.text===`
`){const u=e.hardBreak;return u?c.default.createElement(u,{key:o}):`
`}return i.text}function k(i,o,u,d){const f=e.types[i._type],h={value:i,isInline:d,index:o,renderNode:n};if(f)return c.default.createElement(f,I({key:u},h));t(q(i._type),{nodeType:"block",type:i._type});const m=e.unknownType;return c.default.createElement(m,I({key:u},h))}return n};function F(e){const{node:t,index:n,isInline:l,renderNode:s}=e,a=ee(t).map((y,k)=>s({node:y,isInline:!0,index:k,renderNode:s}));return{_key:t._key||`block-${n}`,children:a,index:n,isInline:l,node:t}}function Te(){}exports.PortableText=Ee;exports.PortableTextComponentsProvider=we;exports.defaultComponents=B;exports.mergeComponents=P;exports.toPlainText=X;
//# sourceMappingURL=react-portable-text.cjs.js.map
